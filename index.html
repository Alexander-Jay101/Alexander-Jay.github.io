<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Alexander - Portfolio</title>
    <link href="https://fonts.googleapis.com/css?family=Teko:400,500,300,200" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400" rel="stylesheet"> 
    <link rel="stylesheet" href="styling/style.css">
</head>

<body>
    <div class="particle">
        <div class="content" id="content-ref">
            <div class="header-text">
                <h1>ALEXANDER JAY</h1>
                <h2>MY PORTFOLIO</h2>
            </div>
            <div class="page-content">
                <div id="header">
                    <h3>Alexander Jay</h3>
                </div>
                <div id="menu">
                    <div class="arrow arrow-top disabled" id="menu-up">▲</div>
                    <div id="list-items">
                        <span class="list-item">Homepage</span>
                        <span class="list-item">Experiance</span>
                        <span class="list-item">Education</span>
                        <span class="list-item">Volunteering</span>
                        <span class="list-item">Projects</span>
                        <span class="list-item">Contact</span>
                    </div>
                    <div class="arrow arrow-bottom" id="menu-down">▼</div>
                </div>
                <div class="page">
                    <div class="cutout cutout-left">
                        <img class="contentImages contentImages-left" src="./images/me.png" />
                    </div>
                    <div class="pageText">

                    </div>
                </div>
                <div class="page">
                    <div class="cutout cutout-right">
                        <img class="contentImages contentImages-right" src="./images/studio.jpg" />
                    </div>
                    <p>Welcome to the studio - Below I will be listing the places that I volunteer at but one of the main ones is the Artz centre in Skelmersdale</p>
                </div>
                <div class="page">
                    <div class="cutout cutout-left">
                        <img class="contentImages contentImages-left" src="./images/education.jpg" />
                    </div>
                    Career Ready
                </div>
                <div class="page">
                    <div class="cutout cutout-right">
                        <img class="contentImages contentImages-right" src="./images/volunteering.jpg" />
                    </div>
                    Springboard
                </div>
                <div class="page">
                    <div class="cutout cutout-left">
                        <img class="contentImages contentImages-left" src="./images/projects.jpg" />
                    </div>
                    Projects
                </div>
                <div class="page page-reference">
                    <div id="page-header">
                        <h1>Contact</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="script/particles-lw.min.js"></script>
<script>
    // Creating Particles
    new particleArea({
        root: "content-ref",
        type: "circle",
        amount: 60,
        size: 3,
        variance: 0,
        colour: ["white"],
        background: "#050505",
        force: {
            x: 0.7,
            y: 0.5
        }
    });

    class page {
        constructor(dom, index) {
            this.dom = dom;
            this.index = index;
        }

        hide() {
            this.dom.style.opacity = 0;
            this.dom.style.top = "20%";
        }

        show() {
            this.dom.style.opacity = 1;
            this.dom.style.top = "50px";
        }
    }

    class pageManager {
        constructor() {
            const domList = document.getElementsByClassName("page");
            const menuItemList = document.getElementById("list-items").getElementsByClassName("list-item");
            const upArrow = document.getElementsByClassName("arrow-top")[0];
            const downArrow = document.getElementsByClassName("arrow-bottom")[0];

            this.currentPage = 0;
            this.allPages = domList.length;
            this.pages = [];
            this.createPages(domList);
            this.addListeners(menuItemList, upArrow, downArrow);
            this.updateDisplay();
        }

        addListeners(list, up, down) {
            for (let i = 0; i < list.length; i++) {
                list[i].addEventListener("click", () => {
                    this.handleClick(i);
                });
            }
            up.addEventListener("click", () => {
                this.handleClick(this.currentPage - 1);
            });
            down.addEventListener("click", () => {
                this.handleClick(this.currentPage + 1);
            });
            window.addEventListener("keydown", (e) => {
                switch (e.key) {
                    case 'ArrowDown': {
                        this.handleClick(this.currentPage + 1);
                        break;
                    }
                    case 'ArrowUp': {
                        this.handleClick(this.currentPage - 1);
                        break;
                    }
                }
            });
            this.up = up;
            this.down = down;
            this.menuItems = list;
        }

        createPages(domList) {
            for (let i = 0; i < domList.length; i++) {
                this.pages.push(new page(domList[i], i));
                this.pages[i].hide();
            }
        }

        updateDisplay() {
            this.up.style.opacity = 1;
            this.down.style.opacity = 1;

            for (let i = 0; i < this.pages.length; i++) {
                if (i === this.currentPage) {
                    this.pages[i].show();
                    this.menuItems[i].style.fontWeight = 400;
                } else {
                    this.pages[i].hide();
                    this.menuItems[i].style.fontWeight = 200;
                }
            }

            if (this.currentPage == 0) {
                this.up.style.opacity = 0.2;
            }
            if (this.currentPage == this.allPages - 1) {
                this.down.style.opacity = 0.2;
            }
        }

        handleClick(index) {
            if (index == this.currentPage ||
                index < 0 ||
                index > this.allPages - 1
            ) { return };
            this.currentPage = index;
            this.updateDisplay();
        }
    }

    function init() {
        // Setting dom references
        var particleEl = document.getElementsByClassName("particle")[0].querySelector("canvas");
        var pageContentEl = document.getElementsByClassName("page-content")[0];
        var contentEl = document.getElementById("content-ref");
        contentEl.addEventListener("click", pageTransition);
        pageContentEl.style.display = "none";
        particleEl.style.pointerEvents = "none"
        var pages = new pageManager();

        // Initial Animation
        function pageTransition() {
            contentEl.style.margin = 0;
            contentEl.style.height = "100vh";
            contentEl.style.borderWidth = 0;
            contentEl.style.cursor = "default";

            contentEl.addEventListener("transitionend", () => {
                contentEl.style.background = "#fff";
                particleEl.style.display = "none";
                pageContentEl.style.display = "inline"
                setTimeout(() => {
                    pageContentEl.style.opacity = 1;
                    pageContentEl.style.top = 0;
                }, 500);
            })
        }
    }

    // Guess?
    window.onload = () => {
        init();
    }
</script>

</html>